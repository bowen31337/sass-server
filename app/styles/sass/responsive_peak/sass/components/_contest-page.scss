$contest-page_image-contest-thumbnail-dimensions: 125px !default;


@mixin components\contest-page {

  // Light styling pass for home tab on contest page
  .lia-quilt-contest-home-tab {
    @include media(desktop) {
      margin-top: $padding-xl-vertical;
    }

    .lia-quilt-row-main > .lia-quilt-column-main-left,
    .lia-quilt-row-main > .lia-quilt-column-main-right {
      @include media(tablet) {
        margin-bottom: $padding-large-vertical;
      }

      .lia-quilt-column-alley-right,
      .lia-quilt-column-alley-left {
        background: $li-bg-secondary;
        border: 1px solid $li-border-color;
        border-radius: $border-radius-base;
        padding: $panel-body-padding;
      }
    }
  }

  .ContestPage {
    .lia-media-masonry-grid {
      @include media(phone) {
        padding-left: $panel-body-padding - $padding-xs-horizontal;
        padding-right: $panel-body-padding - $padding-xs-horizontal;
      }
    }
  }

  .lia-masonry-contest-card-kudos-wrapper {
    @include clearfix;

    display: block;
  }

  .lia-media-masonry-grid .lia-messages-message-masonry-contest-card .lia-messages-message-masonry-body {
    color: $text-color;
    padding: {
      bottom: 0;
      left: $panel-body-padding;
      right: $panel-body-padding;
      top: $panel-body-padding - $padding-small-vertical;
    }
  }

    // styling for new contest masonry card
  .lia-messages-message-masonry-contest-card {
    .lia-batch-processing {
      float: left;
      margin-top: $padding-large-vertical;
    }

    .lia-messages-message-subject {
      position: relative;
    }

    .lia-kudos-kudo {
      @include centered-horizontal(relative);
      float: initial;
      margin-bottom: $panel-body-padding;
      max-width: $li-kudos-alt-button-style-width;
      width: 100%;
    }

    .lia-kudos-kudo-reversed {
      @include kudos-button-primary-inverse;

      vertical-align: top;

      &.lia-kudos-actioned {
        @include kudos-button-secondary-inverse;
      }
    }

    .lia-messages-message-replies-count {
      float: right;
    }

    .lia-messages-message-masonry-footer {
      border-top: 1px solid $li-border-color;
      margin: {
        bottom: 0;
        left: -$panel-body-padding;
        right: -$panel-body-padding;
        top: 0;
      }
      padding: {
        bottom: $padding-large-vertical;
        left: $panel-body-padding;
        right: $panel-body-padding;
        top: $padding-large-vertical;
      }
    }

    .lia-message-stats-icon {
      font-size: $font-size-large;
      margin-right: $padding-xs-horizontal * 1.5;
      vertical-align: baseline;
    }

    .lia-subject-text {
      // TODO:generalize new subject style / handle read state
      color: $text-color;
      font-size: $font-size-h4;
      font-weight: normal;

      &:nth-child(2) { // only happens if batch actions are present
        display: block;
        margin-left: $padding-xl-horizontal;
      }
    }

    .lia-topic-stat {
      padding: 0;
    }

    .lia-user-avatar {
      @include circle($li-avatar-size-small);

      margin-right: $padding-xs-horizontal;
      vertical-align: middle;
    }

    .lia-user-name-link {
      display: inline-block;
      line-height: $li-avatar-size-small;
      vertical-align: middle;
    }

    .lia-users-user-inline {
      display: inline-block;
      vertical-align: top;
      white-space: nowrap;
    }

    .lia-user-rank-icon {
      display: none;
    }

    .lia-ratings-rating {
      @include ratings-star($li-ratings-star-large);
      @include centered-horizontal(relative);
      text-align: center;
      max-width: $li-ratings-alt-button-style-width;
    }

    .lia-masonry-contest-card-ratings {
      margin-bottom: $panel-body-padding;
    }
  }

  @include media(tablet) {
    .lia-quilt-layout-contest-message .lia-component-author {
      margin-bottom: 0;
      padding: 0;
    }

    .lia-quilt-layout-contest-entries .lia-quilt-column.lia-quilt-column-06.lia-quilt-column-right.lia-quilt-column-side-content {
      padding-left: 0;
    }
  }

  .ContestPage {

    .lia-message-read.lia-component-subject,
    .lia-message-unread.lia-component-subject {
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .contest-article-link {
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .lia-menu-bar {
      margin: {
        bottom: $panel-body-padding;
        left: 0;
        right: 0;
        top: $panel-body-padding;
      }

      .lia-menu-bar-buttons {
        float: left;
      }
    }

    .lia-component-tabs > .lia-tabs-standard {
      margin-bottom: 0;
    }

    .lia-deckgrid {
      margin-bottom: 0;
      margin-top: 0;
    }

    @include media(phone) {
      .lia-menu-bar-bottom {
        .lia-decoration-border-menu-bar-content {
          text-align: center;
        }

        .lia-paging-full {
          display: inline-block;
        }

        .lia-paging-full-wrapper {
          line-height: 0;
        }

        .lia-menu-bar-buttons {
          display: block;
          float: none;
          margin-top: $panel-body-padding;
        }
      }
    }
  }

  .ContestSubmissionPage,
  .lia-quilt-contest-winners-tab {
    .lia-link-navigation.kudos-link {
      width: 100%;
    }
  }

  .lia-contest.PostPage,
  .lia-contest.EditPage {
    .ui-dialog .lia-panel-dialog-content iframe {
      border: 0;
      height: 500px;
      width: 100%;
    }


    .MessageEditorForm {
      legend {
        display: block;
      }

      .lia-form-attachments-fieldset-toggle {
        margin-top: $padding-large-vertical;
        padding-top: $padding-large-vertical;
        width: 100%;
      }
    }

    .lia-component-media-widget-uploaded-image-preview,
    .lia-media-image-upload-display {
      margin: {
        bottom: $panel-body-padding;
        left: 0;
        right: 0;
        top: $panel-body-padding;
      }

      .lia-image-display {
        width: 100%;
      }
    }
  }

  .lia-story-contest.lia-component-submissions {
    margin-top: $padding-large-vertical;

    .lia-message-kudos.lia-component-kudos {
      position: absolute;
      right: $padding-small-horizontal * 2;

      .lia-link-navigation.kudos-link {
        width: 100%;
      }
    }

    .lia-message-author-avatar {
      margin-bottom: $padding-large-vertical;
    }

    .BatchProcessing {
      margin: 0;
      position: absolute;
      right: 1px;
      top: 1px;
    }
  }

  .lia-component-entrytabs {
    margin-left: $padding-small-horizontal;
    margin-top: $padding-large-vertical;
  }

  .lia-image-contest.lia-component-submissions {
    margin-top: $padding-large-vertical;

    .contest-batch-processing {
      position: absolute;
      right: $padding-small-horizontal;
      z-index: 1; // for some reason they're behind the images without this..
    }

    .lia-list-tile {
      text-align: left;
    }

    .contest-gallery-card {
      background-color: $li-bg-secondary;
      border: 1px solid $li-border-color;
      border-radius: $border-radius-base * 2;
      border-top-width: 3px;
      margin: $padding-large-vertical $padding-small-horizontal;
      padding: $padding-large-vertical;
      position: relative;
      white-space: nowrap;
      width: $contest-page_image-contest-thumbnail-dimensions + (2 * $padding-small-horizontal) + 2px;

      .lia-quilt-row-footer {
        background-color: transparent;
        border-top: 0;
      }

      .MessageReadByModeratorCell {
        position: absolute;
        top: $contest-page_image-contest-thumbnail-dimensions + $padding-small-vertical;
      }
    }

    .lia-quilt-contest-gallery-content .lia-quilt-column-alley.lia-quilt-column-alley-single,
    .contest-gallery-content {
      overflow: hidden;
      text-overflow: ellipsis;
      word-wrap: normal; // IE 10 hack
    }

    .lia-button-image-kudos-horizontal > .lia-button-image-kudos-count,
    .lia-button-image-kudos-horizontal > .lia-button-image-kudos-give {
      border: 0;
      float: none;
    }

    .UploadedImageDisplay {
      padding-bottom: $padding-small-vertical;
    }

    .lia-quilt-uploaded-contest-image-display {
      .lia-quilt-column-alley.lia-quilt-column-alley-single {
        border: 0;
        padding: 0;
      }
    }

    .lia-list-tile-image {
      height: $contest-page_image-contest-thumbnail-dimensions;
      overflow: hidden;
      position: relative;
      width: $contest-page_image-contest-thumbnail-dimensions;

      img {
        @include translate(-50%, -50%);

        left: 50%;
        max-width: none;
        min-height: $contest-page_image-contest-thumbnail-dimensions;
        position: absolute;
        top: 50%;
      }
    }
  }
}
